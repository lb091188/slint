---
<!-- Copyright © SixtyFPS GmbH <info@slint.dev> ; SPDX-License-Identifier: MIT -->
title: Common Properties & Callbacks 通用属性和回调函数
description: Common Properties & Callbacks
---

import SlintProperty  from '/src/components/SlintProperty.astro';
import CodeSnippetMD from '/src/components/CodeSnippetMD.astro';
import Link from '/src/components/Link.astro';

Slint 元素具有许多通用属性、回调函数和行为。本页描述了这些属性及其用法。

## 通用视觉属性

这些属性适用于所有视觉元素，例如 `Rectangle`、`Text` 和 `layouts`。非视觉元素（如 `Timer`）没有这些属性。

### x, y
<SlintProperty propName="x, y" typeName="length" >
元素相对于其父元素的位置。
</SlintProperty>

### z
<SlintProperty propName="z" typeName="float" >
允许指定元素与其兄弟元素的堆叠顺序。该值必须为编译时常量。

:::note[注意]
目前 `z` 值为编译时常量，无法在运行时更改。
:::

</SlintProperty>

### width, height
<SlintProperty propName="width, height" typeName="length" >
元素的宽度和高度。设置后，将覆盖默认大小。
</SlintProperty>

### opacity
<SlintProperty propName="opacity" typeName="float" defaultValue="1">
一个介于 0 和 1 之间的值（或百分比），用于绘制元素及其子元素的透明度。0 表示完全透明（不可见），1 表示完全不透明。透明度应用于子元素树，就像它们首先绘制到中间层，然后整个层以该透明度渲染。

:::tip[提示]
当元素的透明度为 0 时，它仍会占用布局空间，并且任何手势处理将继续有效。如果意图是隐藏元素以便其不再进行手势处理或不再占用布局空间，请改用 `visible` 属性。
:::
</SlintProperty>

### visible
<SlintProperty propName="visible" typeName="bool" defaultValue="true">
当设置为 `false` 时，元素及其所有子元素将不会被绘制，并且不会响应鼠标输入。

以下示例演示了带有子元素的 `opacity` 属性。透明度应用于红色矩形。由于绿色矩形是红色矩形的子元素，您可以看到其下方的渐变，但无法通过绿色矩形看到红色矩形。
<CodeSnippetMD imagePath="/src/assets/generated/rectangle-opacity.png"  imageWidth="200" imageHeight="200"  imageAlt='rectangle opacity'>
```slint
Rectangle {
    x: 10px;
    y: 10px;
    width: 180px;
    height: 180px;
    background: #315afd;
    opacity: 0.5;
}

Rectangle {
    x: 10px;
    y: 210px;
    width: 180px;
    height: 180px;
    background: green;
    opacity: 0.5;
}
```
</CodeSnippetMD>
</SlintProperty>

### absolute-position
<SlintProperty propName="absolute-position" typeName="struct" structName="Point" propertyVisibility="out">

在具有许多嵌套组件的 UI 中，了解它们相对于主窗口或屏幕的 (x,y) 位置非常有用。此便利属性提供了对该值的只读访问。

它表示一个点，指定在封闭的 <Link type="Window"/> 或 <Link type="PopupWindow"/> 内的绝对位置。它定义了相对于封闭窗口或弹出窗口的坐标 (x,y)，但参考框架未指定（可能是屏幕、窗口或弹出窗口坐标）。
</SlintProperty>

## 其他

### cache-rendering-hint
<SlintProperty typeName="bool" propName="cache-rendering-hint" default="false" >
当设置为 `true` 时，这为渲染器提供了一个提示，将元素及其所有子元素的内容缓存到中间缓存层中。对于很少更改的复杂子树，这可能会加速渲染，但会增加内存消耗。并非所有渲染后端都支持此功能，因此这只是一个提示。
</SlintProperty>

### dialog-button-role
<SlintProperty typeName="enum" enumName="DialogButtonRole" defaultValue="none">
指定这是 `Dialog` 中的一个按钮。
</SlintProperty>

## 通用回调函数

### `init()`

每个元素隐式声明了一个 `init` 回调函数。您可以为其分配一个代码块，该代码块将在元素实例化且所有属性都使用其最终绑定的值初始化后调用。调用顺序是从内到外。以下示例将打印 "first"，然后是 "second"，最后是 "third"：

```slint
component MyButton inherits Rectangle {
    in-out property <string> text: "Initial";
    init => {
        // 如果在此处查询 `text`，它将具有值 "Hello"。
        debug("first");
    }
}

component MyCheckBox inherits Rectangle {
    init => { debug("second"); }
}

export component MyWindow inherits Window {
    MyButton {
        text: "Hello";
        init => { debug("third"); }
    }
    MyCheckBox {
    }
}
```

不要使用此回调函数来初始化属性，因为这违反了声明式原则。

尽管 `init` 回调函数存在于所有组件中，但不能从应用程序代码中设置，即在生成的代码中不存在 `on_init` 函数。这是因为回调函数在组件创建期间调用，在您可以调用 `on_init` 来实际设置它之前。

虽然 `init` 回调函数可以调用其他回调函数，例如在 `global` 部分中定义的回调函数，并且您可以在后端绑定这些回调函数，但这不适用于静态创建的组件，包括窗口本身，因为您需要一个实例来设置全局绑定。但对于动态创建的组件（例如在 `if` 后面的组件），这是可能的：

```slint
export global SystemService  {
    // 此回调函数可以使用 Slint API 在本机代码中实现
    callback ensure_service_running();
}

component MySystemButton inherits Rectangle {
    init => {
        SystemService.ensure_service_running();
    }
    // ...
}

export component AppWindow inherits Window {
    in property <bool> show-button: false;

    // MySystemButton 最初未初始化，仅在 show-button 设置为 true 时初始化。
    // 此时，其 init 回调函数将调用 ensure_service_running()
    if show-button : MySystemButton {}
}
```

## 无障碍属性

使用以下 `accessible-` 属性使您的项目与屏幕阅读器、盲文终端和其他软件良好交互，以使您的应用程序具有无障碍性。必须设置 `accessible-role` 才能设置任何其他无障碍属性或回调函数。

### accessible-role
<SlintProperty typeName="enum" enumName="AccessibleRole">
元素的角色。此属性是使用任何其他无障碍属性的必要条件。应将其设置为常量值。（默认值：对于大多数元素为 `none`，但对于 `Text` 元素为 `text`）
</SlintProperty>

### accessible-checkable
<SlintProperty typeName="bool" propName="accessible-checkable" default="false">
元素是否可被检查。
</SlintProperty>

### accessible-checked
<SlintProperty typeName="bool" propName="accessible-checked" default="false">
元素是否被检查。这映射到复选框、单选按钮和其他小部件的“checked”状态。
</SlintProperty>

### accessible-description
<SlintProperty typeName="string" propName="accessible-description" default='""'>
当前元素的描述。
</SlintProperty>

### accessible-enabled
<SlintProperty typeName="bool" propName="accessible-enabled" default="true">
元素是否启用。这映射到大多数小部件的“enabled”状态。（默认值：`true`）
</SlintProperty>

### accessible-label
<SlintProperty typeName="string" propName="accessible-label" default='""'>
交互元素的标签。（默认值：对于大多数元素为空，或对于 `Text` 元素为 `text` 属性的值）
</SlintProperty>

### accessible-value-maximum
<SlintProperty typeName="float" propName="accessible-value-maximum" default="0">
项目的最大值。例如，用于微调框。
</SlintProperty>

### accessible-value-minimum
<SlintProperty typeName="float" propName="accessible-value-minimum" default="0">
项目的最小值。
</SlintProperty>

### accessible-value-step
<SlintProperty typeName="float" propName="accessible-value-step" default="0">
当前值可以更改的最小增量或减量。这对应于滑块上可以拖动的步长。
</SlintProperty>

### accessible-value
<SlintProperty typeName="string" propName="accessible-value" default='""'>
项目的当前值。
</SlintProperty>

### accessible-placeholder-text
<SlintProperty typeName="string" propName="accessible-placeholder-text" default='""'>
当项目值为空时使用的占位符文本。适用于文本元素。
</SlintProperty>

### accessible-item-selectable
<SlintProperty typeName="bool" propName="accessible-value" >
元素是否可选择。
</SlintProperty>

### accessible-item-selected
<SlintProperty typeName="bool" propName="accessible-item-selected" >
元素是否被选中。这映射到列表视图项目的“is-selected”状态。
</SlintProperty>

### accessible-item-index
<SlintProperty typeName="int" propName="accessible-item-index">
 此元素在一组相似元素中的索引（从 0 开始）。适用于列表项、单选按钮和其他元素。
</SlintProperty>

### accessible-item-count
<SlintProperty typeName="int" propName="accessible-item-count">
一组元素的总数。适用于列表视图、单选按钮组或其他分组元素的父容器。
</SlintProperty>

## 无障碍回调函数
您还可以使用以下回调函数，这些回调函数将由无障碍框架调用：

### accessible-action-default()
当请求此小部件的默认操作时调用（例如：按下按钮）。

### accessible-action-set-value(string)
当用户想要更改无障碍值时调用。

### accessible-action-increment()
当用户请求增加值时调用。

### accessible-action-decrement()
当用户请求减少值时调用。

